<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dashboard Penjual Busana Muslimah - AZZURA BOUTIQUE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
</head>
<body class="bg-gray-100 font-sans antialiased">
    <div class="flex min-h-screen">
        <aside class="w-64 bg-blue-800 text-white p-5 flex flex-col justify-between">
            <div>
                <h2 class="text-3xl font-extrabold text-center mb-6">AZZURA Seller</h2>
                <nav class="space-y-3">
                    <a href="dashboard-seller.html" class="flex items-center py-2 px-3 rounded-lg text-lg font-medium bg-blue-600 hover:bg-blue-600 transition duration-200 ease-in-out">
                        <i class="fas fa-home mr-3"></i> Dashboard
                    </a>
                    <a href="#products-section" class="flex items-center py-2 px-3 rounded-lg text-lg font-medium hover:bg-blue-600 transition duration-200 ease-in-out">
                        <i class="fas fa-box-open mr-3"></i> Produk Busana Muslimah
                    </a>
                    <a href="#orders-section" class="flex items-center py-2 px-3 rounded-lg text-lg font-medium hover:bg-blue-600 transition duration-200 ease-in-out">
                        <i class="fas fa-receipt mr-3"></i> Pesanan
                    </a>
                    <a href="#reports-section" class="flex items-center py-2 px-3 rounded-lg text-lg font-medium hover:bg-blue-600 transition duration-200 ease-in-out">
                        <i class="fas fa-chart-line mr-3"></i> Laporan
                    </a>
                    <a href="#settings-section" class="flex items-center py-2 px-3 rounded-lg text-lg font-medium hover:bg-blue-600 transition duration-200 ease-in-out">
                        <i class="fas fa-cog mr-3"></i> Pengaturan
                    </a>
                </nav>
            </div>
            <a href="index.html" id="logoutButtonSeller" class="flex items-center justify-center py-2 bg-red-600 hover:bg-red-700 px-3 rounded-lg text-lg font-medium transition duration-200 ease-in-out mt-auto">
                <i class="fas fa-sign-out-alt mr-3"></i> Logout
            </a>
        </aside>

        <main class="flex-1 p-8">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8">Dashboard Penjual Busana Muslimah</h1>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 shadow-lg rounded-lg flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-lg">Total Penjualan Busana</p>
                        <p class="text-3xl font-bold text-blue-600" id="totalSales">Rp 2.750.000</p>
                    </div>
                    <i class="fas fa-dollar-sign text-5xl text-blue-200"></i>
                </div>
                <div class="bg-white p-6 shadow-lg rounded-lg flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-lg">Pesanan Baru (Muslimah)</p>
                        <p class="text-3xl font-bold text-green-600" id="newOrders">5</p>
                    </div>
                    <i class="fas fa-shopping-bag text-5xl text-green-200"></i>
                </div>
                <div class="bg-white p-6 shadow-lg rounded-lg flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-lg">Total Produk Muslimah</p>
                        <p class="text-3xl font-bold text-yellow-600" id="totalProducts">25</p>
                    </div>
                    <i class="fas fa-box text-5xl text-yellow-200"></i>
                </div>
            </div>

            <div class="bg-white p-6 shadow-lg rounded-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">Grafik Penjualan Busana Muslimah Bulanan</h2>
                <canvas id="salesChart" style="height: 400px;" class="w-full"></canvas>
            </div>

            <section id="products-section" class="bg-white p-6 shadow-lg rounded-lg mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-700">Produk Busana Muslimah Saya</h2>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium transition duration-200 ease-in-out flex items-center" onclick="addProduct()">
                        <i class="fas fa-plus mr-2"></i> Tambah Produk Busana Baru
                    </button>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                        <thead>
                            <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Produk ID</th>
                                <th class="py-3 px-6 text-left">Nama Produk</th>
                                <th class="py-3 px-6 text-left">Kategori</th>
                                <th class="py-3 px-6 text-right">Harga</th>
                                <th class="py-3 px-6 text-right">Stok</th>
                                <th class="py-3 px-6 text-center">Aksi</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-700 text-sm font-light" id="productTableBody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="orders-section" class="bg-white p-6 shadow-lg rounded-lg mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-700">Pesanan Terbaru Busana Muslimah</h2>
                    <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-medium transition duration-200 ease-in-out">
                        Lihat Semua Pesanan
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                        <thead>
                            <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left">Order ID</th>
                                <th class="py-3 px-6 text-left">Pelanggan</th>
                                <th class="py-3 px-6 text-left">Total</th>
                                <th class="py-3 px-6 text-left">Status</th>
                                <th class="py-3 px-6 text-center">Tanggal</th>
                                <th class="py-3 px-6 text-center">Aksi</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-700 text-sm font-light" id="orderTableBody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="reports-section" class="bg-white p-6 shadow-lg rounded-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">Laporan Penjualan Busana Muslimah</h2>
                <p class="text-gray-600">Di sini Anda bisa mengunduh laporan penjualan busana muslimah bulanan, tahunan, atau berdasarkan jenis produk (Gamis, Abaya, dll.).</p>
                <div class="flex flex-wrap gap-4 mt-4">
                    <button class="bg-teal-600 hover:bg-teal-700 text-white px-5 py-2 rounded-lg font-medium transition duration-200 ease-in-out flex items-center">
                        <i class="fas fa-file-excel mr-2"></i> Unduh Laporan Excel
                    </button>
                    <button class="bg-purple-600 hover:bg-purple-700 text-white px-5 py-2 rounded-lg font-medium transition duration-200 ease-in-out flex items-center">
                        <i class="fas fa-chart-pie mr-2"></i> Laporan Kustom
                    </button>
                </div>
            </section>

            <section id="settings-section" class="bg-white p-6 shadow-lg rounded-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">Pengaturan Akun Penjual Busana Muslimah</h2>
                <p class="text-gray-600">Kelola informasi profil, detail toko busana muslimah Anda, dan preferensi notifikasi.</p>
                <button class="bg-gray-600 hover:bg-gray-700 text-white px-5 py-2 rounded-lg font-medium transition duration-200 ease-in-out mt-4">
                    <i class="fas fa-user-cog mr-2"></i> Edit Pengaturan
                </button>
            </section>

        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- Dashboard Summary Data (Simulated) ---
        const totalSalesElement = document.getElementById('totalSales');
        const newOrdersElement = document.getElementById('newOrders');
        const totalProductsElement = document.getElementById('totalProducts');

        // Simulate fetching data (replace with actual API calls in a real app)
        const dashboardData = {
            totalSales: 2750000,
            newOrders: 5,
            totalProducts: 25
        };

        totalSalesElement.textContent = 'Rp ' + dashboardData.totalSales.toLocaleString('id-ID');
        newOrdersElement.textContent = dashboardData.newOrders;
        totalProductsElement.textContent = dashboardData.totalProducts;


        // --- Sales Chart ---
        const ctx = document.getElementById('salesChart').getContext('2d');
        // Simulated sales data (replace with actual API calls in a real app)
        const salesData = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'],
            datasets: [{
                label: 'Total Penjualan (Rp)',
                data: [1500000, 2000000, 1800000, 2500000, 2750000, 3000000, 2900000, 3500000, 3200000, 3800000, 4000000, 4500000],
                borderColor: '#2563eb',
                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                borderWidth: 2,
                tension: 0.4,
                fill: true
            }]
        };

        const salesChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                    labels: {
                        color: '#4b5563'
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function (context) {
                            return 'Rp ' + context.parsed.y.toLocaleString('id-ID');
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Pendapatan (Rp)',
                        color: '#4b5563'
                    },
                    ticks: {
                        callback: function (value) {
                            return 'Rp ' + value.toLocaleString('id-ID');
                        },
                        color: '#4b5563'
                    },
                    grid: { color: '#e5e7eb' }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Bulan',
                        color: '#4b5563'
                    },
                    ticks: { color: '#4b5563' },
                    grid: { color: '#e5e7eb' }
                }
            }
        };

        new Chart(ctx, {
            type: 'line',
            data: salesData,
            options: salesChartOptions
        });


        // --- Product List (Simulated Data) ---
        const productTableBody = document.getElementById('productTableBody');
        let products = [
            { id: 'MUS001', name: 'Alisa Dress Set Hijab Hitam', category: 'Dress Set', price: 350000, stock: 45 },
            { id: 'MUS002', name: 'Alisa Dress Set Hijab Coklat Tua', category: 'Dress Set', price: 350000, stock: 28 },
            { id: 'MUS003', name: 'Alisa Dress Set Hijab Taupe', category: 'Dress Set', price: 350000, stock: 32 }
        ];

        function renderProducts() {
            productTableBody.innerHTML = ''; // Clear existing rows
            products.forEach(product => {
                const row = `
                    <tr class="border-b border-gray-200 hover:bg-gray-50">
                        <td class="py-3 px-6 text-left whitespace-nowrap">${product.id}</td>
                        <td class="py-3 px-6 text-left">${product.name}</td>
                        <td class="py-3 px-6 text-left">${product.category}</td>
                        <td class="py-3 px-6 text-right">Rp ${product.price.toLocaleString('id-ID')}</td>
                        <td class="py-3 px-6 text-right">${product.stock}</td>
                        <td class="py-3 px-6 text-center">
                            <div class="flex item-center justify-center space-x-3">
                                <button class="text-blue-500 hover:text-blue-700" onclick="editProduct('${product.id}')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="text-red-500 hover:text-red-700" onclick="deleteProduct('${product.id}')">
                                    <i class="fas fa-trash-alt"></i> Hapus
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                productTableBody.insertAdjacentHTML('beforeend', row);
            });
        }
        renderProducts(); // Initial render

        // --- Order List (Simulated Data) ---
        const orderTableBody = document.getElementById('orderTableBody');
        let orders = [
            { id: '#BM12345', customerName: 'Fatimah Az-Zahra', total: 700000, status: 'Diproses', date: '2025-05-30' },
            { id: '#BM12346', customerName: 'Aisyah Nurani', total: 350000, status: 'Selesai', date: '2025-05-29' },
            { id: '#BM12347', customerName: 'Maryam Laili', total: 1050000, status: 'Dikirim', date: '2025-05-28' }
        ];

        function renderOrders() {
            orderTableBody.innerHTML = ''; // Clear existing rows
            orders.forEach(order => {
                let statusClass = '';
                let statusText = '';
                let completeButton = '';

                if (order.status === 'Diproses') {
                    statusClass = 'bg-yellow-200 text-yellow-800';
                    statusText = 'Diproses';
                    completeButton = `<button class="text-green-500 hover:text-green-700" onclick="markOrderComplete('${order.id}')">
                                            <i class="fas fa-check-circle"></i> Selesai
                                        </button>`;
                } else if (order.status === 'Selesai') {
                    statusClass = 'bg-green-200 text-green-800';
                    statusText = 'Selesai';
                    completeButton = `<button class="text-gray-400 cursor-not-allowed" disabled>
                                            <i class="fas fa-check-circle"></i> Selesai
                                        </button>`;
                } else if (order.status === 'Dikirim') {
                    statusClass = 'bg-blue-200 text-blue-800';
                    statusText = 'Dikirim';
                    completeButton = `<button class="text-green-500 hover:text-green-700" onclick="markOrderComplete('${order.id}')">
                                            <i class="fas fa-check-circle"></i> Selesai
                                        </button>`;
                }

                const row = `
                    <tr class="border-b border-gray-200 hover:bg-gray-50">
                        <td class="py-3 px-6 text-left whitespace-nowrap">${order.id}</td>
                        <td class="py-3 px-6 text-left">${order.customerName}</td>
                        <td class="py-3 px-6 text-left">Rp ${order.total.toLocaleString('id-ID')}</td>
                        <td class="py-3 px-6 text-left">
                            <span class="py-1 px-3 rounded-full text-xs ${statusClass}">${statusText}</span>
                        </td>
                        <td class="py-3 px-6 text-center">${order.date}</td>
                        <td class="py-3 px-6 text-center">
                            <button class="text-blue-500 hover:text-blue-700 mr-2" onclick="viewOrderDetail('${order.id}')">
                                <i class="fas fa-eye"></i> Detail
                            </button>
                            ${completeButton}
                        </td>
                    </tr>
                `;
                orderTableBody.insertAdjacentHTML('beforeend', row);
            });
        }
        renderOrders(); // Initial render


        // --- Fungsi untuk logout ---
        document.getElementById('logoutButtonSeller').addEventListener('click', function(event) {
            event.preventDefault(); // Mencegah navigasi default link
            if (confirm('Apakah Anda yakin ingin logout dari dashboard penjual?')) {
                // Di aplikasi nyata, Anda akan membuat panggilan API ke backend untuk logout
                // fetch('/api/logout', { method: 'POST' })
                // .then(response => {
                //     if (response.ok) {
                //         localStorage.removeItem('authToken'); // Hapus token dari localStorage
                //         alert('Anda telah berhasil logout!');
                //         window.location.href = 'index.html';
                //     } else {
                //         alert('Gagal logout. Silakan coba lagi.');
                //     }
                // })
                // .catch(error => {
                //     console.error('Error during logout:', error);
                //     alert('Terjadi kesalahan saat logout.');
                // });

                alert('Anda telah berhasil logout! (Simulasi)');
                window.location.href = 'index.html'; // Redirect ke halaman beranda
            }
        });

        // --- Contoh fungsi-fungsi simulasi untuk aksi tombol ---
        window.addProduct = function() {
            const productName = prompt('Masukkan nama produk busana muslimah baru:');
            if (productName) {
                const newProductId = 'MUS' + (products.length + 1).toString().padStart(3, '0');
                const newProduct = {
                    id: newProductId,
                    name: productName,
                    category: 'Belum Ditentukan', // Default category
                    price: parseFloat(prompt('Masukkan harga produk:')) || 0,
                    stock: parseInt(prompt('Masukkan stok produk:')) || 0
                };
                products.push(newProduct);
                renderProducts();
                alert(`Produk "${productName}" berhasil ditambahkan!`);
            }
        };

        window.editProduct = function(productId) {
            const productToEdit = products.find(p => p.id === productId);
            if (productToEdit) {
                const newName = prompt(`Edit nama produk (${productToEdit.name}):`, productToEdit.name);
                const newPrice = prompt(`Edit harga produk (${productToEdit.price.toLocaleString('id-ID')}):`, productToEdit.price);
                const newStock = prompt(`Edit stok produk (${productToEdit.stock}):`, productToEdit.stock);

                if (newName !== null) productToEdit.name = newName;
                if (newPrice !== null) productToEdit.price = parseFloat(newPrice) || productToEdit.price;
                if (newStock !== null) productToEdit.stock = parseInt(newStock) || productToEdit.stock;

                renderProducts();
                alert(`Produk ${productId} berhasil diupdate!`);
            } else {
                alert('Produk tidak ditemukan.');
            }
            // Di sini Anda akan membuat panggilan API untuk memperbarui produk di backend
        };

        window.deleteProduct = function(productId) {
            if (confirm('Apakah Anda yakin ingin menghapus produk busana muslimah: ' + productId + '?')) {
                products = products.filter(p => p.id !== productId);
                renderProducts();
                alert('Produk busana muslimah ' + productId + ' dihapus! (Simulasi)');
                // Di sini Anda akan membuat panggilan API untuk menghapus produk dari backend
            }
        };

        window.viewOrderDetail = function(orderId) {
            alert('Melihat detail pesanan busana muslimah: ' + orderId);
            // Di sini Anda akan mengarahkan ke halaman detail pesanan atau membuka modal
            // Contoh: window.location.href = `order-detail.html?id=${orderId}`;
        };

        window.markOrderComplete = function(orderId) {
            if (confirm('Apakah Anda yakin ingin menandai pesanan busana muslimah ' + orderId + ' sebagai selesai?')) {
                const orderToComplete = orders.find(o => o.id === orderId);
                if (orderToComplete) {
                    orderToComplete.status = 'Selesai';
                    renderOrders();
                    alert('Pesanan busana muslimah ' + orderId + ' ditandai selesai! (Simulasi)');
                } else {
                    alert('Pesanan tidak ditemukan.');
                }
                // Di sini Anda akan membuat panggilan API untuk memperbarui status pesanan di backend
            }
        };
    });
    </script>
</body>
</html>